---
layout: default
title: Micro Service Architecture Pattern
parent: Micro Service Architecture Pattern
nav_order: 1
---

# Micro Service Architecture Pattern
{: .no_toc }


## Table of contents
{: .no_toc .text-delta }

1. TOC
{:toc}

---


## **패턴 pattern 및 패턴의 구조**


### **패턴 이란 ?**
- 특정한 상황에서 발생한 문제에 대한 재사용 가능한 해법
- 패턴 언어는 특정 영역 내부에서 문제를 해결하는 연관된 패턴의 집합을 의미
- 소프트웨어 아키텍처 및 설계에 관한 다양한 문제를 패턴에 따라 소프트웨어 엘리먼트를 결합하여 해결
- 패턴은 자신이 적용되는 맥락을 반드시 기술해야 함 : 만능 패턴은 없다

 
### **패턴의 구조 : 강제 조항 forces**
- 주어진 맥락에서 문제를 해결하고자 할 때 반드시 처리해야 할 이슈
- 상충하는 강제 조항도 있기에 맥락에 따라 우선 순위를 정함


### **패턴의 구조 : 결과 맥락 resulting context**
- 패턴을 적용한 결과를 다음 세 부분으로 기술
- 장점 : 해결된 강제 조항 등 패턴의 좋은 점
- 단점 : 미해결된 강제 조항 등 패턴의 나쁜 점
- 이슈 : 패턴 적용 시 발생한 새로운 문제점


### **패턴의 구조 : 연관 패턴 related patterns**
- 한 패턴과 다른 패턴의 관계를 다섯 가지 관계 유형으로 기술
- 선행자 predecessor : 이 패턴을 필요하게 만든 선행 패턴 ex. 마이크로서비스 아키텍처 패턴은 서비스 디스커버리 패턴의 선행자
- 후행자 successor : 이 패턴으로 야기된 이슈를 해결하는 패턴 ex. 서비스 디스커버리 패턴은 마이크로서비스 아키텍처 패턴의 후행자
- 대안 alternative : 이 패턴의 대체 솔루션을 제공하는 패턴 ex. 마이크로서비스 아키텍처 패턴과 모놀리식 아키텍처 패턴은 대안 관계
- 일반화 generalization : 문제를 해결하는 일반적인 솔루션에 해당하는 패턴
- 세분화 specialization : 특정 패턴을 더 세부적으로 나타낸 형태


* * *


## **마이크로서비스 아키텍처 패턴 언어 개요**


### **마이크로서비스 패턴 계층**
- 인프라 패턴 infrastructure pattern : 배포, 통신(디스커버리, 외부 API) 등 주로 개발 영역 밖의 인프라 문제를 해결
- 애플리케이션 인프라 패턴 application infrastructure : 횡단 관심사, 보안, 관측성, 통신(트랜잭셔널 메시징, 통신 스타일, 신뢰성) 등 개발에도 영향을 미치는 인프라 문제를 해결
- 애플리케이션 패턴 application patterns : 서비스 분해, DB 아키텍처, 쿼리, 데이터 일관성 유지, 테스트 등 개발자가 맞닥뜨리는 문제를 해결


### **서비스 분해 패턴**
- 한 시스템을 여러 서비스로 분해하는 방법
- 비즈니스 능력에 따른 분해 패턴 / 하위 도메인에 따른 분해 패턴


### **통신 패턴**
- 통신 스타일 패턴 : 프로세스 간 통신 IPC 방식에 대한 패턴 ( 메시징 패턴 / 원격 프로시저 호출 패턴 / 도메인 특정 패턴 )
- 디스커버리 discovery 패턴 : 클라이언트가 서비스 인스턴스의 IP 주소를 가져오는 방식에 대한 패턴 ( 클라이언트 디스커버리 패턴 / 서버 디스커버리 패턴, 서비스 레지스트리 패턴, 자가등록 패턴 / 서드파티 등록 패턴 ) 
- 신뢰성 패턴 : 서비스 불능 시 서비스 간 통신의 신뢰성 보장에 대한 패턴 ( 회로차단기 패턴 )
- 트랜잭셔널 메시징 transactional messaging 패턴 : DB 트랜잭션에 메시지를 송신하고 이벤트를 발행하는 행위를 통합하는 패턴 ( 트랜잭셔널 아웃박스 패턴, 폴링 발행기 패턴, 트랜잭션 로그 테일링 패턴 ) 
- 외부 API 패턴 : 클라이언트가 서비스와 통신하는 방식에 대한 패턴 ( API 게이트웨이 패턴 / 프런트엔드를 위한 백엔드 BFF 패턴 )


### **데이터 일관성 패턴**
- 서비스 자체 DB 간 데이터 일관성을 유지하는 방법
- 사가 패턴, 도메인 이벤트 패턴, 애그리거트 패턴, 이벤트 소싱 패턴


### **데이터 쿼리 패턴**
- 각 서비스가 소유한 데이터를 조인하는 쿼리를 구현하는 패턴
- API 조합 패턴 / 커맨드 쿼리 책임 분리 CQRS 패턴


### **서비스 배포 패턴**
- 다양한 언어와 프레임워크로 구현된 수십 ~ 수백 개의 마이크로서비스 애플리케이션을 배포하는 패턴
- 호스트별 다중 서비스 패턴 / 호스트별 단일 서비스 패턴 / 서버리스 배포 패턴, 컨테이너별 서비스 패턴 / VM별 서비스 패턴, 서비스 배포 플랫폼 패턴


### **관측성 패턴**
- 애플리케이션 동작을 파악하고 요청 실패, 높은 지연 시간 등 문제를 진단 / 조치 하는 패턴
- 헬스 체크 health check API 패턴, 로그 수집 log aggregation 패턴, 분산 추적 distributed tracing 패턴, 예외 추적 exception tracking 패턴, 애플리케이션 지표 application metrics 패턴, 감사 로깅 audit logging 패턴


### **서비스 테스트 자동화 패턴**
- 서로 다른 여러 서비스가 조화롭게 잘 작동되는지 테스트 하는 패턴
- 컨슈머 주도 계약 테스트 패턴, 컨슈머 쪽 계약 테스트 패턴, 서비스 컴포넌트 테스트 패턴


### **횡단 관심사 처리 패턴**
- 관측성 패턴, 디스커버리 패턴, 외부화 구성 패턴 등 모든 서비스가 반드시 구현해야 할 관심사를 처리하는 패턴
- 마이크로서비스 섀시 패턴


### **보안 패턴**
- 신원 identity, 역할 role 등 사용자 정보를 인증하는 패턴
- 액세스 토큰 패턴